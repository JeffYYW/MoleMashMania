<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Early Testing</title>

    <script src='https://code.jquery.com/jquery-3.2.1.min.js' integrity='sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4='crossorigin='anonymous'></script>

</head>
<body>
    <style>
        body {
            background-color: lightgray;
        }

        .topSquare {
            height: 100px;
            width: 100px;
            background-color: gray;
        }

        .container {
            display: flex;
            position: relative;
            top: 200px;
            left: 20%;
            width: 800px;
            height: 400px;
            border: 2px solid dodgerblue;

        }

        .myDiv {
            width: 100px;
            height: 100px;
            background-color: coral;
            transition: .1s linear;
            border: 2px solid dodgerblue;
        }

    </style>
    <div class="topSquare">
        <h2></h2>
    </div>

    <div class="container">
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
    </div>

    <script> 

    

    const topDiv = document.getElementsByClassName('topSquare')[0];

    const blockObj = [
        { active: false },
        { active: false },
        { active: false },
        { active: false },
        { active: false },
        { active: false },
    ]

    const block = document.getElementsByClassName('myDiv');

    

    
  
    // create function that will iterate through an array (block) that will hold a list of divs that represent the moles
    // iterate through the array
    // for each div, call the raise() function on it
        // raise() will translateY this div upwards by 200px
        // update active property to 'true'
        // when the user clicks on a div with an active property of 'true', add 1 to the score
        // call lower() after a random setTimeout   
    // lower() will translateY this div back to its original position
    // update active property to false
    // reset counter and loop through the initial function again
    // setInterval for the initial function

    // https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals#Active_learning_a_reaction_game 
        // #3
    function random(min, max) {
        var num = Math.floor(Math.random() * (max - min)) + min;
        return num;
    }

    // function lowerOnClick(i) {
    //     block[i].onclick = function() {
    //         if (blockObj[i].active === true) {
    //             lower(i);
    //         }
    //     }
    // }

    //listen for a click on the 'block' div and change color if active = true, and change to another if active = false 

    // function colorChangeOnClick(i) {
    //     block[i].addEventListener("click", function () {
    //         if (blockObj[i].active === true) {
    //             block[i].style.backgroundColor = 'green';
    //             // lower(i);
    //         } else {
    //             block[i].style.backgroundColor = 'red';
    //         }
    //     });
    // }
    
    let score = 0;

    function lower(i) {
        // if (blockObj[i].active === true) {
            block[i].style.transform = "translateY(0px)";
            blockObj[i].active = false;
            block[i].style.backgroundColor = 'red';
            console.log(blockObj[i]);
        // }
    }

    function raise(i) {
        // colorChangeOnClick(i);
        block[i].style.transform = "translateY(-200px)";
        blockObj[i].active = true;
        block[i].style.backgroundColor = 'green';
        // add event listener: if clicked and active === true, call lower(). else setTimeout and call lower()
        block[i].addEventListener("click", function () {
            if (blockObj[i].active === true) {
                // block[i].style.backgroundColor = 'green';
                score = score + 1;
                $('.topSquare h2').html(score);
                lower(i);
            }
        })
            
        
        // lowerOnClick(i);
        console.log(blockObj[i]);
        setTimeout(lower, random(1000, 2000), i);
    }

    // https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop
    let i = 0;

    function init() {
        setTimeout(function() {             // set timeout to pause time between blocks being raised
            raise(i);                         
            i++;
            if (i < block.length) {         // loop through all blocks and call raise() on each one
                init();
            } else if (score > 10) {
                alert("You win!");
                return
            } else {                        // once the block array reaches the end, counter is reset to 0 and init() function is called again to 
                i = 0;                          // 'restart' the loop
                init();
            }
        }, random(1000, 2500))
    }     
    
    //dont need set interval here
    // setInterval(init, 2000);
    init();
    

    </script>

    <!-- to do -->
<!-- namespace -->
<!-- onclick, lower() -->
<!-- add game exit -->
<!-- add game start -->
<!-- add timer -->
<!-- add score counter -->
<!-- style divs -->
<!-- style background -->


    <!-- stretch -->
<!-- randomize array -->
<!-- make an array holding specific interval values? [1500, 2000, 3000, 4000] -->
    <!-- challenge -->
<!-- getting the random timing -->
<!-- resetting the counter to 0 and restarting the init loop -->
</body>
</html>


