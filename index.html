<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Early Testing</title>

</head>
<body>
    <style>
        
        .topSquare {
            height: 100px;
            width: 100px;
            background-color: gray;
        }

        .container {
            display: flex;
            position: relative;
            top: 200px;
            left: 20%;
            width: 800px;
            height: 400px;
            border: 2px solid dodgerblue;

        }

        .myDiv {
            /* position: absolute; */
            bottom: 0;
            left: 20%;
            width: 100px;
            height: 100px;
            background-color: coral;
            transition: .5s linear;
            border: 2px solid dodgerblue;
        }

    </style>
    <div class="topSquare">

    </div>

    <div class="container">
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
        <div class="myDiv"></div>
    </div>

    <script>
    
    // left = 37
    // up = 38
    // right = 39
    // down = 40

    // document.onkeydown = function (event) {
    //     if (event.keyCode == 38) {
    //         block.style.backgroundColor = 'blue';
    //     } else if (event.keyCode == 40) {
    //         block.style.backgroundColor = 'coral';
    //     } else if (event.keyCode == 39 ) {
    //         block.style.height = '200px';
    //     } else if (event.keyCode == 37) {
    //         block.style.height = '100px';
    //     }
    // }


        // if (blockObj.height === 100) {
        //     blockObj.height = 100;
        //     block.style.backgroundColor = 'red';
        // } else if (blockObj.height > 100) {
        //     blockObj.height = 200;
        //     block.style.backgroundColor = 'green';

        // }

    // const block = document.getElementsByClassName('myDiv')[0];
    const topDiv = document.getElementsByClassName('topSquare')[0];

    // const blockObj = {
    //     height: 100,
    //     active: true
    // };

    const blockObj = [
        { active: false },
        { active: false },
        { active: false },
        { active: false },
        { active: false },
        { active: false },
    ]

    const block = document.getElementsByClassName('myDiv');

    function addClickListener(i) {
        // for (let i = 0; i < block.length; i++) {
            block[i].addEventListener("click", function() {
                if (blockObj[i].active === true) {
                    topDiv.style.backgroundColor = 'green';
                } else {
                    topDiv.style.backgroundColor = 'red';
                }
            });
        }
    // }

    //listen for a click on the 'block' div and change color if active = true, and change to another if active = false 
    // block.addEventListener("click", changeColor);

    // do i need the active state? can i use if height > 100?
    // function changeColor() {
    //     if (blockObj[i].active === true) {
    //         topDiv.style.backgroundColor = 'green';
    //     } else {
    //         topDiv.style.backgroundColor = 'red';
    //     }
    // };

    // shrink will move the div back to 0px and update the blockObj active prop to false. Clicking on the div in that state will change its color.
    // setInterval will run grow again.
    function shrink() {
        blockObj.height = 100;
        // block.style.height = '100px';
        for (let i = 0; i < block.length; i++) {
            block[i].style.transform = "translateY(0px)";
        }
        blockObj.active = false;
        console.log(blockObj);
    }

    function random(min, max) {
        var num = Math.floor(Math.random() * (max - min)) + min;
        return num;
    }

    // grow will move the div up 200px. When the div grows, update blockObj to make it active so that a click on it will change its color. 
    // call the shrink() function after 1s
    function grow() {
        blockObj.height = 200;
        // block.style.height = '200px';
        for (let i=0; i < block.length; i++) {
            block[i].style.transform = "translateY(-200px)";
        }
        blockObj.active = true;
        console.log(blockObj);
        setTimeout(shrink, random(1000,3000));
    }

    // call setInterval function to start the program. Make grow() run every 4 seconds
    // setInterval(grow, 3000);

    // for (let i = 0; i < block.length; i++) {
    //     grow(i);
    // }

    // or make an array holding specific interval values [1500, 2000, 3000, 4000]


    
    // create function that will iterate through the block array
    // iterate through the block array
    // for each div, call the grow() function on it
        // grow() will translateY this div
        // update active property to true
        // call shrink() after a random setTimeout   
    // shrink() will translateY this div back to its original value
    // update active property to false
    // setInterval for the first function
    function lower(i) {
        block[i].style.transform = "translateY(0px)";
        blockObj[i].active = false;
        console.log(blockObj[i]);
    }

    function raise(i) {
        addClickListener(i);
        block[i].style.transform = "translateY(-200px)";
        blockObj[i].active = true;
        console.log(blockObj[i]);
        setTimeout(lower, random(1000, 3000), i);
    }

    // https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop
    let i = 0;

    function init() {
        setTimeout(function() {
            raise(i);
            i++;
            if (i < block.length) {
                init();
            };
        }, random(1000, 3000))

        i = 0;
        // for (let i = 0; i < block.length; i++) {
        //     raise(i);
        // }
    }     
    
    // setInterval(init, 4000);
    


    </script>
</body>
</html>